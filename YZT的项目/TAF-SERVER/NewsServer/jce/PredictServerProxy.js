// **********************************************************************
// This file was generated by a TAF parser!
// TAF version 4.2.2 by TAF Team.
// Generated from `./PredictServer.jce'
// **********************************************************************

var TafStream = require('@taf/taf-stream');
var TafError  = require('@taf/taf-rpc').error;

if(TafStream.JceStruct == undefined){
TafStream.JceStruct = function() {
this._jce_double_precision_ = -1;
}
TafStream.JceStruct.prototype.setPrecision = function(d) {
if ((d == -1) || (d >= 0 && d <= 15)) {
this._jce_double_precision_ = d;
return true;
}
return false;
}
TafStream.JceStruct.prototype.resetPrecision = function() { this._jce_double_precision_ = -1;}
TafStream.JceStruct.prototype.hasSetPrecision = function() { return (this._jce_double_precision_ >= 0 && this._jce_double_precision_ <= 15);}
TafStream.JceStruct.prototype.getPrecision = function() { return this._jce_double_precision_; }
}

var Predict = Predict || {};
module.exports.Predict = Predict;

Predict.PredictInterProxy = function () {
    this._name   = undefined;
    this._worker = undefined;
}

Predict.PredictInterProxy.prototype.setTimeout = function (iTimeout) {
    this._worker.timeout = iTimeout;
}

Predict.PredictInterProxy.prototype.getTimeout = function ( ) {
    return this._worker.timeout;
}


Predict.PredictData = function() {
    this.stockCode = "";
    this.stockType = 0;
    this.market = 0;
    this.calcDate = "";
    this.predictDate = "";
    this.holdRange = 0;
    this.upProb = 0;
    this.sugPosi = 0;
    this.priceProg = 0;
    this.flucCeil = 0;
    this.flucFlor = 0;
    this._classname = "Predict.PredictData";
};
Predict.PredictData.prototype = new TafStream.JceStruct();
Predict.PredictData._classname = "Predict.PredictData";

Predict.PredictData._write = function (os, tag, value) { os.writeStruct(tag, value); }
Predict.PredictData._read  = function (is, tag, def) { return is.readStruct(tag, true, def); }
Predict.PredictData._readFrom = function (is) {
    if(is.readResumePrecision == undefined){
        is.readResumePrecision = function(){
            return -1;
        }
    }
    is.saveResetPrecision && is.saveResetPrecision();
    var tmp = new Predict.PredictData();
    tmp.stockCode = is.readString(0, true, "");
    tmp.stockType = is.readInt32(1, true, 0);
    tmp.market = is.readInt32(2, true, 0);
    tmp.calcDate = is.readString(3, false, "");
    tmp.predictDate = is.readString(4, false, "");
    tmp.holdRange = is.readInt32(5, true, 0);
    tmp.upProb = is.readDouble(6, false, 0);
    tmp.sugPosi = is.readDouble(7, false, 0);
    tmp.priceProg = is.readDouble(8, false, 0);
    tmp.flucCeil = is.readDouble(9, false, 0);
    tmp.flucFlor = is.readDouble(10, false, 0);
    tmp._jce_double_precision_ = is.readResumePrecision();
    return tmp;
};
Predict.PredictData.prototype._writeTo = function (os) {
    os.savePrecision && os.savePrecision(this._jce_double_precision_);
    os.writeString(0, this.stockCode);
    os.writeInt32(1, this.stockType);
    os.writeInt32(2, this.market);
    if (this.calcDate != undefined && this.calcDate != "") {
        os.writeString(3, this.calcDate);
    }
    if (this.predictDate != undefined && this.predictDate != "") {
        os.writeString(4, this.predictDate);
    }
    os.writeInt32(5, this.holdRange);
    if (this.upProb != undefined && this.upProb != 0) {
        os.writeDouble(6, this.upProb);
    }
    if (this.sugPosi != undefined && this.sugPosi != 0) {
        os.writeDouble(7, this.sugPosi);
    }
    if (this.priceProg != undefined && this.priceProg != 0) {
        os.writeDouble(8, this.priceProg);
    }
    if (this.flucCeil != undefined && this.flucCeil != 0) {
        os.writeDouble(9, this.flucCeil);
    }
    if (this.flucFlor != undefined && this.flucFlor != 0) {
        os.writeDouble(10, this.flucFlor);
    }
    os.resumePrecision && os.resumePrecision();
};
Predict.PredictData.prototype._equal = function (anItem) {
    assert(false, 'this structure not define key operation');
}
Predict.PredictData.prototype._genKey = function () {
    if (!this._proto_struct_name_) {
        this._proto_struct_name_ = 'STRUCT' + Math.random();
    }
    return this._proto_struct_name_;
}
Predict.PredictData.prototype.toObject = function() { 
    var tmp = {};

    tmp.stockCode = this.stockCode;
    tmp.stockType = this.stockType;
    tmp.market = this.market;
    tmp.calcDate = this.calcDate;
    tmp.predictDate = this.predictDate;
    tmp.holdRange = this.holdRange;
    tmp.upProb = this.upProb;
    tmp.sugPosi = this.sugPosi;
    tmp.priceProg = this.priceProg;
    tmp.flucCeil = this.flucCeil;
    tmp.flucFlor = this.flucFlor;
    
    return tmp;
}
Predict.PredictData.prototype.readFromObject = function(json) { 
    !json.hasOwnProperty("stockCode") || (this.stockCode = json.stockCode);
    !json.hasOwnProperty("stockType") || (this.stockType = json.stockType);
    !json.hasOwnProperty("market") || (this.market = json.market);
    !json.hasOwnProperty("calcDate") || (this.calcDate = json.calcDate);
    !json.hasOwnProperty("predictDate") || (this.predictDate = json.predictDate);
    !json.hasOwnProperty("holdRange") || (this.holdRange = json.holdRange);
    !json.hasOwnProperty("upProb") || (this.upProb = json.upProb);
    !json.hasOwnProperty("sugPosi") || (this.sugPosi = json.sugPosi);
    !json.hasOwnProperty("priceProg") || (this.priceProg = json.priceProg);
    !json.hasOwnProperty("flucCeil") || (this.flucCeil = json.flucCeil);
    !json.hasOwnProperty("flucFlor") || (this.flucFlor = json.flucFlor);
}
Predict.PredictData.prototype.toBinBuffer = function () {
    var os = new TafStream.JceOutputStream();
    this._writeTo(os);
    return os.getBinBuffer();
}
Predict.PredictData.new = function () {
    return new Predict.PredictData();
}
Predict.PredictData.create = function (is) {
    return Predict.PredictData._readFrom(is);
}
Predict.PredictReq = function() {
    this.stockCode = "";
    this.stockType = 0;
    this._classname = "Predict.PredictReq";
};
Predict.PredictReq.prototype = new TafStream.JceStruct();
Predict.PredictReq._classname = "Predict.PredictReq";

Predict.PredictReq._write = function (os, tag, value) { os.writeStruct(tag, value); }
Predict.PredictReq._read  = function (is, tag, def) { return is.readStruct(tag, true, def); }
Predict.PredictReq._readFrom = function (is) {
    if(is.readResumePrecision == undefined){
        is.readResumePrecision = function(){
            return -1;
        }
    }
    is.saveResetPrecision && is.saveResetPrecision();
    var tmp = new Predict.PredictReq();
    tmp.stockCode = is.readString(0, true, "");
    tmp.stockType = is.readInt32(1, true, 0);
    tmp._jce_double_precision_ = is.readResumePrecision();
    return tmp;
};
Predict.PredictReq.prototype._writeTo = function (os) {
    os.savePrecision && os.savePrecision(this._jce_double_precision_);
    os.writeString(0, this.stockCode);
    os.writeInt32(1, this.stockType);
    os.resumePrecision && os.resumePrecision();
};
Predict.PredictReq.prototype._equal = function (anItem) {
    assert(false, 'this structure not define key operation');
}
Predict.PredictReq.prototype._genKey = function () {
    if (!this._proto_struct_name_) {
        this._proto_struct_name_ = 'STRUCT' + Math.random();
    }
    return this._proto_struct_name_;
}
Predict.PredictReq.prototype.toObject = function() { 
    var tmp = {};

    tmp.stockCode = this.stockCode;
    tmp.stockType = this.stockType;
    
    return tmp;
}
Predict.PredictReq.prototype.readFromObject = function(json) { 
    !json.hasOwnProperty("stockCode") || (this.stockCode = json.stockCode);
    !json.hasOwnProperty("stockType") || (this.stockType = json.stockType);
}
Predict.PredictReq.prototype.toBinBuffer = function () {
    var os = new TafStream.JceOutputStream();
    this._writeTo(os);
    return os.getBinBuffer();
}
Predict.PredictReq.new = function () {
    return new Predict.PredictReq();
}
Predict.PredictReq.create = function (is) {
    return Predict.PredictReq._readFrom(is);
}
Predict.PredictRsp = function() {
    this.iRet = 0;
    this.iMsg = "";
    this.predictDataList = new TafStream.List(Predict.PredictData);
    this._classname = "Predict.PredictRsp";
};
Predict.PredictRsp.prototype = new TafStream.JceStruct();
Predict.PredictRsp._classname = "Predict.PredictRsp";

Predict.PredictRsp._write = function (os, tag, value) { os.writeStruct(tag, value); }
Predict.PredictRsp._read  = function (is, tag, def) { return is.readStruct(tag, true, def); }
Predict.PredictRsp._readFrom = function (is) {
    if(is.readResumePrecision == undefined){
        is.readResumePrecision = function(){
            return -1;
        }
    }
    is.saveResetPrecision && is.saveResetPrecision();
    var tmp = new Predict.PredictRsp();
    tmp.iRet = is.readInt32(0, true, 0);
    tmp.iMsg = is.readString(1, false, "");
    tmp.predictDataList = is.readList(2, false, TafStream.List(Predict.PredictData));
    tmp._jce_double_precision_ = is.readResumePrecision();
    return tmp;
};
Predict.PredictRsp.prototype._writeTo = function (os) {
    os.savePrecision && os.savePrecision(this._jce_double_precision_);
    os.writeInt32(0, this.iRet);
    if (this.iMsg != undefined && this.iMsg != "") {
        os.writeString(1, this.iMsg);
    }
    if (this.predictDataList != undefined && this.predictDataList.length > 0) {
        os.writeList(2, this.predictDataList);
    }
    os.resumePrecision && os.resumePrecision();
};
Predict.PredictRsp.prototype._equal = function (anItem) {
    assert(false, 'this structure not define key operation');
}
Predict.PredictRsp.prototype._genKey = function () {
    if (!this._proto_struct_name_) {
        this._proto_struct_name_ = 'STRUCT' + Math.random();
    }
    return this._proto_struct_name_;
}
Predict.PredictRsp.prototype.toObject = function() { 
    var tmp = {};

    tmp.iRet = this.iRet;
    tmp.iMsg = this.iMsg;
    tmp.predictDataList = this.predictDataList.toObject();
    
    return tmp;
}
Predict.PredictRsp.prototype.readFromObject = function(json) { 
    !json.hasOwnProperty("iRet") || (this.iRet = json.iRet);
    !json.hasOwnProperty("iMsg") || (this.iMsg = json.iMsg);
    !json.hasOwnProperty("predictDataList") || (this.predictDataList.readFromObject(json.predictDataList));
}
Predict.PredictRsp.prototype.toBinBuffer = function () {
    var os = new TafStream.JceOutputStream();
    this._writeTo(os);
    return os.getBinBuffer();
}
Predict.PredictRsp.new = function () {
    return new Predict.PredictRsp();
}
Predict.PredictRsp.create = function (is) {
    return Predict.PredictRsp._readFrom(is);
}

Predict.PredictInterProxy.prototype.getPredictData = function (predictReq) {
    var _encode = function () { 
        var os = new TafStream.JceOutputStream();
        os.writeStruct(1, predictReq);
        return os.getBinBuffer();
    }

    var _decode = function (data) {
        try {
            var response = {arguments:{}};
            var is = new TafStream.JceInputStream(data.response.sBuffer);

            response.costtime = data.request.costtime;
            response.return   = is.readInt32(0, true, TafStream.Int32);
            response.arguments.predictRsp = is.readStruct(2, true, Predict.PredictRsp);

            return {request:data.request, response:response};
        } catch (e) {
            var response = { };
            response.costtime      = data.request.costtime;
            response.error         = {};
            response.error.code    = TafError.CLIENT.DECODE_ERROR;
            response.error.message = e.message;

            throw { request : data.request, response : response};
        }
    }

    var _error = function(data) {
        var response = {};
        response.costtime = data.request.costtime;
        response.error    = data.error;

        throw {request:data.request, response:response};
    }

    return this._worker.taf_invoke('getPredictData', _encode(), arguments.length != 0?arguments[arguments.length - 1]:undefined).then(_decode, _error);
}



